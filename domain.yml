version: "3.1"

intents:
  - start_telegram
  - how_to_get_started
  - greet
  - goodbye
  - thanks
  - affirm
  - deny
  - stop
  - contact_info
  - bot_challenge
  - inform
  - search_data
  - plot_data
  - explain_data
  - statistics_data
  - download_data
  - request_plot_form
  - request_download_form

entities:
  - username
  - data_search_terms
  - data_file_format

slots:
  username:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: username
  data:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
        action: action_search_data
  data_meta:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
        action: action_search_data
  data_search_terms:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: data_search_terms
  data_file_format:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: data_file_format

responses:
  utter_welcome:
    - text: "¡Hola! ¿En qué puedo ayudarte?"
      channel: "telegram"
  utter_greet:
    - text: "¡Hola! ¿Qué tal estás?"
    - text: "¡Hey! ¿Qué tal estás?"
    - text: "¡Hey {username}! ¿Qué tal estás?"
    - text: "¡Hola {name}! ¿Cómo va tu día?"

  utter_did_that_help:
    - text: "Did that help you?"

  utter_goodbye:
    - text: "¡Hasta luego!"
    - text: "¡Nos vemos!"
    - text: "Bye"

  utter_iamabot:
    - text: "Soy un bot, powered by Rasa."

  utter_you_are_welcome:
    - text: "De nada."
    - text: "Un placer :)."

  utter_anything_else:
    - text: "¿Hay algo más en lo que pueda ayudarte?"
    - text: "¿Te puedo ayudar en algo más?"

  utter_dataset_menu:
    - text: "¿Quieres saber algo sobre los datos?"
      buttons:
        - title: "Mostar gráfico"
          payload: "/plot_data"
        - title: "Descargar archivo"
          payload: "/download_data"
        - title: "Explicar datos"
          payload: "/explain_data"
        - title: "Mostrar datos estadísticos"
          payload: "/statistics_data"
        - title: "No"
          payload: "/deny"
      button_type: "vertical"

  utter_ask_data_search_terms:
    - text: "¿Qué tema te interesa?"
    - text: "¿Qué datos quieres?"
    - text: "¿Qué quieres que busque?"

  # utter_ask_data_file_format:
  #   - text: "En qué formato quieres descargar los datos? (CSV, XLS, PDF)"
  #     buttons:
  #       - title: "CSV"
  #         payload: "csv"
  #       - title: "XLS"
  #         payload: "xls"
  #       - title: "PDF"
  #         payload: "pdf"
  #     button_type: "inline"

  utter_ask_restart:
    - text: "¿Quieres empezar de nuevo?"
      buttons:
        - title: "Si"
          payload: "si"
        - title: "No"
          payload: "no"
    - text: "¿Quieres comenzar desde el principio?"
      buttons:
        - title: "Si"
          payload: "si"
        - title: "No"
          payload: "no"

  utter_search_slots:
    - text: "Voy a buscar datos sobre {data_search_terms}..."

  utter_plot_slots:
    - text: "Voy a generar un gráfico sobre {data_search_terms}..."

  utter_download_slots:
    - text: "Voy a preparar la descarga sobre {data_search_terms} en {data_file_format}..."

  utter_explain_slots:
    - text: "Voy a generar una consulta sobre {data_search_terms}..."

  utter_statistics_slots:
    - text: "Voy a generar datos estadísticos sobre {data_search_terms}..."

actions:
  - action_search_data
  - action_plot_data
  - action_explain_data
  - action_statistics_data
  - action_download_data
  - action_empty_slots
  - action_ask_data_file_format
  - validate_data_search_terms_form
  - validate_data_file_format_form

forms:
  data_search_terms_form:
    required_slots:
      - data_search_terms
  data_file_format_form:
    required_slots:
      - data_file_format

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false
